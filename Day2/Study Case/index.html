<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <title>Simulasi Cicilan Motor</title>
</head>

<body>
  <h2>Simulasi Cicilan Motor</h2>

  <label>Harga Motor (Rp):</label><br>
  <input type="number" id="hargaMotor" /><br><br>

  <label>Uang Muka (DP) (Rp):</label><br>
  <input type="number" id="dp" /><br><br>

  <label>Bunga pertahun:</label><br>
  <select id="tenor">
    <option value="12">12 bulan -> 5%</option>
    <option value="24">24 bulan -> 8%</option>
    <option value="36">36 bulan -> 10%</option>
    <option value="48">48 bulan -> 12%</option>
  </select><br><br>

  <!-- <label>Bunga per Tahun (%):</label><br>
  <input type="number" id="bunga" placeholder="Contoh: 8" /><br><br> -->

  <label>Pemasukan per Bulan (Rp):</label><br>
  <input type="number" id="pemasukan" /><br><br>

  <button onclick="hitungCicilan()">Hitung Cicilan</button>

  <h3>Hasil:</h3>
  <div id="hasil"></div>

  <script>
    function hitungCicilan() {
      const harga = parseFloat(document.getElementById("hargaMotor").value);
      const dp = parseFloat(document.getElementById("dp").value);
      const tenor = parseInt(document.getElementById("tenor").value);
      const hasilDiv = document.getElementById("hasil");
      const pemasukan = parseFloat(document.getElementById("pemasukan").value);

      // Validasi input
      if (isNaN(harga) || isNaN(dp) || isNaN(pemasukan)) {
        hasilDiv.innerHTML = "<span style='color:red;'>Harga, DP, dan Bunga harus diisi dengan angka.</span>";
        return;
      }

      //Validasi pemasukan minimum
      if (pemasukan < 3000000) {
        hasilDiv.innerHTML = `<span style='color:red;'>Maaf, pemasukan Anda harus minimal Rp 3.000.000 untuk melakukan pengajuan cicilan.</span>`;
      }

      // buat kondisi ketika dp kurang dari 30%
      if (dp < harga * 0.3) {
        const dpMinimal = harga * 0.3;
        hasilDiv.innerHTML = `<span style='color:red;'>DP minimal 30% sebesar Rp ${dpMinimal}.</span>`;
        return;
      }
      const pinjaman = harga - dp;

      // Penentuan bunga berdasarkan tenor
      let bungaInput = 0;
      switch (tenor) {
        case 12:
          bungaInput = 5;
          break;
        case 24:
          bungaInput = 8;
          break;
        case 36:
          bungaInput = 10;
          break;
        case 48:
          bungaInput = 12;
          break;
        default:
          break;
      }

      // buat perhitungan bunga

      const bungaTotal = (pinjaman * (bungaInput / 100));

      // Perhitungan
      const totalPembayaran = pinjaman + bungaTotal;
      const cicilanBulanan = totalPembayaran / tenor;


      hasilDiv.innerHTML = `
        <p>Harga Motor: Rp ${harga.toLocaleString()}</p>
        <p>DP: Rp ${dp.toLocaleString()}</p>
        <p>Pinjaman: Rp ${pinjaman.toLocaleString()}</p>
        <p>Bunga per tahun: ${bungaInput}%</p>
        <p>Total Pembayaran: Rp ${totalPembayaran.toLocaleString()}</p>
        <p><strong>Cicilan per bulan: Rp ${cicilanBulanan.toLocaleString(undefined, { maximumFractionDigits: 0 })}</strong></p>
      `;
    }
  </script>
</body>

</html>